<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Create and preview AI workflows, automation solutions, and visual content with our advanced content builder. Drag, drop, and design anywhere.">
  <meta name="keywords" content="AI workflow builder, content preview, automation design, visual content creator, AI tools preview">
  <meta name="author" content="The AI Chamber">
  <meta name="robots" content="index, follow">
  
  <title>AI Workflows & Content Preview - The AI Chamber</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&display=swap">
  
  <!-- AOS Animation Library -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: #0a0a0a;
      color: #ffffff;
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* MINIMAL HEADER */
    .header {
      position: relative;
      background: radial-gradient(ellipse at center, #1a1a1a 0%, #0a0a0a 100%);
      padding: 60px 40px;
      text-align: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      z-index: 10;
    }

    .header-content {
      max-width: 800px;
      margin: 0 auto;
    }

    .back-nav {
      position: absolute;
      top: 24px;
      left: 40px;
      z-index: 20;
    }

    .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 20px;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.15);
      color: rgba(255, 255, 255, 0.9);
      text-decoration: none;
      border-radius: 12px;
      font-weight: 500;
      font-size: 14px;
      transition: all 0.3s ease;
      backdrop-filter: blur(20px);
    }

    .back-btn:hover {
      background: rgba(245, 158, 11, 0.1);
      border-color: rgba(245, 158, 11, 0.3);
      color: #f59e0b;
      transform: translateY(-2px);
    }

    .site-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 2.5rem;
      font-weight: 600;
      color: #ffffff;
      margin-bottom: 16px;
    }

    .site-title .accent {
      background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .site-subtitle {
      color: rgba(255, 255, 255, 0.7);
      font-size: 1.2rem;
      margin-bottom: 32px;
    }

    /* TOOLBAR */
    .toolbar {
      background: rgba(255, 255, 255, 0.05);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding: 20px 40px;
      backdrop-filter: blur(20px);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .toolbar-content {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      gap: 20px;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .toolbar-section {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }

    .toolbar-btn {
      padding: 10px 16px;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.15);
      color: #ffffff;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .toolbar-btn:hover {
      background: rgba(245, 158, 11, 0.1);
      border-color: rgba(245, 158, 11, 0.3);
      color: #f59e0b;
    }

    .toolbar-btn.active {
      background: rgba(245, 158, 11, 0.2);
      border-color: rgba(245, 158, 11, 0.4);
      color: #f59e0b;
    }

    .file-input {
      display: none;
    }

    /* MAIN CONTAINER */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 40px;
      display: grid;
      grid-template-columns: 1fr 3fr;
      gap: 40px;
      min-height: calc(100vh - 300px);
    }

    /* SIDEBAR */
    .sidebar {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 24px;
      height: fit-content;
      backdrop-filter: blur(20px);
      position: sticky;
      top: 120px;
    }

    .sidebar h3 {
      color: #ffffff;
      margin-bottom: 20px;
      font-size: 1.1rem;
      font-weight: 600;
    }

    .content-blocks {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .block-item {
      padding: 12px 16px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }

    .block-item:hover {
      background: rgba(245, 158, 11, 0.1);
      border-color: rgba(245, 158, 11, 0.3);
      color: #f59e0b;
    }

    /* CANVAS AREA */
    .canvas-area {
      background: rgba(255, 255, 255, 0.02);
      border: 2px dashed rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 40px;
      min-height: 600px;
      position: relative;
      transition: all 0.3s ease;
    }

    .canvas-area.drag-over {
      border-color: rgba(245, 158, 11, 0.5);
      background: rgba(245, 158, 11, 0.05);
    }

    .canvas-placeholder {
      text-align: center;
      color: rgba(255, 255, 255, 0.4);
      font-size: 1.1rem;
      margin-top: 50px;
    }

    /* CONTENT ELEMENTS */
    .content-element {
      position: relative;
      margin: 20px 0;
      padding: 16px;
      border: 1px solid transparent;
      border-radius: 8px;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .content-element:hover {
      border-color: rgba(245, 158, 11, 0.3);
      background: rgba(245, 158, 11, 0.05);
    }

    .content-element.selected {
      border-color: rgba(245, 158, 11, 0.5);
      background: rgba(245, 158, 11, 0.1);
    }

    .element-controls {
      position: absolute;
      top: -12px;
      right: -12px;
      display: flex;
      gap: 4px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .content-element:hover .element-controls {
      opacity: 1;
    }

    .control-btn {
      width: 24px;
      height: 24px;
      background: #f59e0b;
      color: #000;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    .control-btn:hover {
      background: #fbbf24;
      transform: scale(1.1);
    }

    /* TEXT ELEMENTS */
    .text-element h1 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 2.5rem;
      font-weight: 700;
      color: #ffffff;
      margin-bottom: 16px;
      line-height: 1.2;
    }

    .text-element h2 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 2rem;
      font-weight: 600;
      color: #f59e0b;
      margin-bottom: 12px;
      line-height: 1.3;
    }

    .text-element h3 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.5rem;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.9);
      margin-bottom: 8px;
    }

    .text-element p {
      font-size: 1.1rem;
      line-height: 1.7;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 16px;
    }

    .text-element ul {
      padding-left: 20px;
      margin-bottom: 16px;
    }

    .text-element li {
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 8px;
      line-height: 1.6;
    }

    .text-element strong {
      color: #f59e0b;
      font-weight: 600;
    }

    /* IMAGE ELEMENTS */
    .image-element {
      position: relative;
      overflow: hidden;
      border-radius: 12px;
      max-width: 100%;
    }

    .image-element img {
      width: 100%;
      height: auto;
      display: block;
      border-radius: 8px;
      transition: transform 0.3s ease;
    }

    .image-element:hover img {
      transform: scale(1.02);
    }

    .image-placeholder {
      width: 100%;
      height: 200px;
      background: rgba(255, 255, 255, 0.05);
      border: 2px dashed rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: rgba(255, 255, 255, 0.4);
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .image-placeholder:hover {
      border-color: rgba(245, 158, 11, 0.4);
      background: rgba(245, 158, 11, 0.05);
      color: #f59e0b;
    }

    /* CODE ELEMENTS */
    .code-element {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 20px;
      font-family: 'Monaco', 'Menlo', monospace;
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.9rem;
      line-height: 1.5;
      overflow-x: auto;
    }

    /* DIVIDER ELEMENTS */
    .divider-element {
      margin: 30px 0;
      text-align: center;
    }

    .divider-line {
      height: 1px;
      background: linear-gradient(90deg, transparent, #f59e0b, transparent);
      margin: 0 auto;
      width: 60%;
    }

    /* BUTTON ELEMENTS */
    .button-element {
      text-align: center;
      margin: 30px 0;
    }

    .preview-btn {
      padding: 12px 24px;
      background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
      color: #000000;
      text-decoration: none;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .preview-btn:hover {
      background: linear-gradient(135deg, #fbbf24 0%, #f97316 100%);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(245, 158, 11, 0.3);
    }

    /* EDITABLE CONTENT */
    .editable {
      outline: none;
      border: 2px solid transparent;
      padding: 4px;
      border-radius: 4px;
      transition: all 0.3s ease;
    }

    .editable:focus {
      border-color: rgba(245, 158, 11, 0.5);
      background: rgba(245, 158, 11, 0.05);
    }

    /* RESPONSIVE DESIGN */
    @media (max-width: 1024px) {
      .container {
        grid-template-columns: 1fr;
        gap: 20px;
        padding: 20px;
      }

      .sidebar {
        position: static;
        order: 2;
      }
    }

    @media (max-width: 768px) {
      .header {
        padding: 40px 20px;
      }

      .back-nav {
        position: relative;
        top: 0;
        left: 0;
        margin-bottom: 20px;
        text-align: center;
      }

      .toolbar {
        padding: 15px 20px;
      }

      .toolbar-content {
        flex-direction: column;
        gap: 12px;
      }

      .canvas-area {
        padding: 20px;
      }
    }

    /* ANIMATIONS */
    .fade-in {
      animation: fadeIn 0.5s ease-out forwards;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* MODAL */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
    }

    .modal-content {
      background: rgba(26, 26, 26, 0.95);
      margin: 5% auto;
      padding: 30px;
      border-radius: 16px;
      width: 90%;
      max-width: 500px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-title {
      color: #ffffff;
      font-size: 1.3rem;
      font-weight: 600;
    }

    .modal-close {
      background: none;
      border: none;
      color: rgba(255, 255, 255, 0.6);
      font-size: 1.5rem;
      cursor: pointer;
      transition: color 0.3s ease;
    }

    .modal-close:hover {
      color: #f59e0b;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.9rem;
      margin-bottom: 8px;
      font-weight: 500;
    }

    .form-input, .form-textarea {
      width: 100%;
      padding: 12px 16px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 8px;
      color: #ffffff;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .form-input:focus, .form-textarea:focus {
      outline: none;
      border-color: rgba(245, 158, 11, 0.5);
      background: rgba(245, 158, 11, 0.05);
    }

    .form-textarea {
      min-height: 100px;
      resize: vertical;
      font-family: inherit;
    }

    .modal-actions {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
    }

    .btn-cancel {
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-cancel:hover {
      background: rgba(255, 255, 255, 0.15);
    }

    .btn-confirm {
      padding: 10px 20px;
      background: #f59e0b;
      color: #000000;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-confirm:hover {
      background: #fbbf24;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <nav class="back-nav">
      <a href="index.html" class="back-btn">
        ← Back to Home
      </a>
    </nav>

    <div class="header-content">
      <h1 class="site-title">AI <span class="accent">Workflows</span> & Content Builder</h1>
      <p class="site-subtitle">Create, preview, and design AI automation workflows with flexible content placement</p>
    </div>
  </header>

  <!-- Toolbar -->
  <div class="toolbar">
    <div class="toolbar-content">
      <div class="toolbar-section">
        <button class="toolbar-btn" onclick="saveContent()">
          💾 Save
        </button>
        <button class="toolbar-btn" onclick="exportContent()">
          📤 Export
        </button>
        <button class="toolbar-btn" onclick="previewMode()">
          👁️ Preview
        </button>
      </div>
      
      <div class="toolbar-section">
        <label for="imageUpload" class="toolbar-btn">
          🖼️ Upload Image
        </label>
        <input type="file" id="imageUpload" class="file-input" accept="image/*" multiple>
        
        <button class="toolbar-btn" onclick="clearCanvas()">
          🗑️ Clear All
        </button>
      </div>
    </div>
  </div>

  <!-- Main Container -->
  <div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
      <h3>Content Blocks</h3>
      <div class="content-blocks">
        <div class="block-item" onclick="addElement('heading1')">
          📝 Large Heading
        </div>
        <div class="block-item" onclick="addElement('heading2')">
          📄 Medium Heading
        </div>
        <div class="block-item" onclick="addElement('heading3')">
          📋 Small Heading
        </div>
        <div class="block-item" onclick="addElement('paragraph')">
          📰 Paragraph
        </div>
        <div class="block-item" onclick="addElement('list')">
          📜 Bullet List
        </div>
        <div class="block-item" onclick="addElement('image')">
          🖼️ Image Block
        </div>
        <div class="block-item" onclick="addElement('code')">
          💻 Code Block
        </div>
        <div class="block-item" onclick="addElement('button')">
          🔘 Button
        </div>
        <div class="block-item" onclick="addElement('divider')">
          ➖ Divider
        </div>
        <div class="block-item" onclick="addElement('spacer')">
          📏 Spacer
        </div>
      </div>
    </div>

    <!-- Canvas Area -->
    <div class="canvas-area" id="canvas" ondrop="handleDrop(event)" ondragover="handleDragOver(event)">
      <div class="canvas-placeholder">
        <h3>Start Building Your Content</h3>
        <p>Drag content blocks from the sidebar or click to add elements</p>
        <p>📱 Fully responsive • 🖼️ Flexible image placement • ⚡ Real-time preview</p>
      </div>
    </div>
  </div>

  <!-- Text Edit Modal -->
  <div id="textModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Edit Text Content</h3>
        <button class="modal-close" onclick="closeModal()">&times;</button>
      </div>
      <div class="form-group">
        <label class="form-label">Content:</label>
        <textarea id="textContent" class="form-textarea" placeholder="Enter your text content..."></textarea>
      </div>
      <div class="modal-actions">
        <button class="btn-cancel" onclick="closeModal()">Cancel</button>
        <button class="btn-confirm" onclick="updateTextContent()">Update</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
  <script>
    // Initialize AOS
    AOS.init({
      duration: 600,
      easing: 'ease-out-cubic',
      once: true,
      offset: 50
    });

    // Global variables
    let selectedElement = null;
    let elementCounter = 0;

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      setupEventListeners();
      loadSampleContent();
    });

    // Setup event listeners
    function setupEventListeners() {
      // Image upload
      document.getElementById('imageUpload').addEventListener('change', handleImageUpload);
      
      // Click outside to deselect
      document.addEventListener('click', function(e) {
        if (!e.target.closest('.content-element') && !e.target.closest('.sidebar')) {
          deselectAll();
        }
      });
    }

    // Add element to canvas
    function addElement(type) {
      const canvas = document.getElementById('canvas');
      const placeholder = canvas.querySelector('.canvas-placeholder');
      
      if (placeholder) {
        placeholder.style.display = 'none';
      }

      const elementId = `element-${++elementCounter}`;
      let elementHTML = '';

      switch (type) {
        case 'heading1':
          elementHTML = `
            <div class="content-element text-element fade-in" id="${elementId}">
              <div class="element-controls">
                <button class="control-btn" onclick="editText('${elementId}')" title="Edit">✏️</button>
                <button class="control-btn" onclick="deleteElement('${elementId}')" title="Delete">🗑️</button>
              </div>
              <h1 class="editable" contenteditable="true">Your Main Heading Here</h1>
            </div>
          `;
          break;
        
        case 'heading2':
          elementHTML = `
            <div class="content-element text-element fade-in" id="${elementId}">
              <div class="element-controls">
                <button class="control-btn" onclick="editText('${elementId}')" title="Edit">✏️</button>
                <button class="control-btn" onclick="deleteElement('${elementId}')" title="Delete">🗑️</button>
              </div>
              <h2 class="editable" contenteditable="true">Section Heading</h2>
            </div>
          `;
          break;
        
        case 'heading3':
          elementHTML = `
            <div class="content-element text-element fade-in" id="${elementId}">
              <div class="element-controls">
                <button class="control-btn" onclick="editText('${elementId}')" title="Edit">✏️</button>
                <button class="control-btn" onclick="deleteElement('${elementId}')" title="Delete">🗑️</button>
              </div>
              <h3 class="editable" contenteditable="true">Subsection Title</h3>
            </div>
          `;
          break;
        
        case 'paragraph':
          elementHTML = `
            <div class="content-element text-element fade-in" id="${elementId}">
              <div class="element-controls">
                <button class="control-btn" onclick="editText('${elementId}')" title="Edit">✏️</button>
                <button class="control-btn" onclick="deleteElement('${elementId}')" title="Delete">🗑️</button>
              </div>
              <p class="editable" contenteditable="true">Click to edit this paragraph. You can write detailed content here about your AI workflows, automation processes, or any other information you want to share. The text is fully editable and responsive.</p>
            </div>
          `;
          break;
        
        case 'list':
          elementHTML = `
            <div class="content-element text-element fade-in" id="${elementId}">
              <div class="element-controls">
                <button class="control-btn" onclick="editText('${elementId}')" title="Edit">✏️</button>
                <button class="control-btn" onclick="deleteElement('${elementId}')" title="Delete">🗑️</button>
              </div>
              <ul class="editable" contenteditable="true">
                <li><strong>Feature 1:</strong> Automated workflow processing</li>
                <li><strong>Feature 2:</strong> Smart content generation</li>
                <li><strong>Feature 3:</strong> Real-time analytics and insights</li>
                <li><strong>Feature 4:</strong> Seamless integration capabilities</li>
              </ul>
            </div>
          `;
          break;
        
        case 'image':
          elementHTML = `
            <div class="content-element image-element fade-in" id="${elementId}">
              <div class="element-controls">
                <button class="control-btn" onclick="changeImage('${elementId}')" title="Change Image">🖼️</button>
                <button class="control-btn" onclick="deleteElement('${elementId}')" title="Delete">🗑️</button>
              </div>
              <div class="image-placeholder" onclick="changeImage('${elementId}')">
                📷 Click to add image<br>
                <small>Supports: JPG, PNG, GIF, WebP</small>
              </div>
            </div>
          `;
          break;
        
        case 'code':
          elementHTML = `
            <div class="content-element fade-in" id="${elementId}">
              <div class="element-controls">
                <button class="control-btn" onclick="editText('${elementId}')" title="Edit">✏️</button>
                <button class="control-btn" onclick="deleteElement('${elementId}')" title="Delete">🗑️</button>
              </div>
              <div class="code-element editable" contenteditable="true">// AI Workflow Example
const aiWorkflow = {
  input: "user_request",
  process: async (request) => {
    const result = await AI.generate(request);
    return result.optimize();
  },
  output: "generated_content"
};</div>
            </div>
          `;
          break;
        
        case 'button':
          elementHTML = `
            <div class="content-element button-element fade-in" id="${elementId}">
              <div class="element-controls">
                <button class="control-btn" onclick="editText('${elementId}')" title="Edit">✏️</button>
                <button class="control-btn" onclick="deleteElement('${elementId}')" title="Delete">🗑️</button>
              </div>
              <button class="preview-btn editable" contenteditable="true">
                🚀 Get Started Now
              </button>
            </div>
          `;
          break;
        
        case 'divider':
          elementHTML = `
            <div class="content-element divider-element fade-in" id="${elementId}">
              <div class="element-controls">
                <button class="control-btn" onclick="deleteElement('${elementId}')" title="Delete">🗑️</button>
              </div>
              <div class="divider-line"></div>
            </div>
          `;
          break;
        
        case 'spacer':
          elementHTML = `
            <div class="content-element fade-in" id="${elementId}" style="height: 40px; border: 1px dashed rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center; color: rgba(255,255,255,0.3); font-size: 0.8rem;">
              <div class="element-controls">
                <button class="control-btn" onclick="deleteElement('${elementId}')" title="Delete">🗑️</button>
              </div>
              Spacer (40px)
            </div>
          `;
          break;
      }

      canvas.insertAdjacentHTML('beforeend', elementHTML);
      
      // Select the new element
      setTimeout(() => {
        selectElement(elementId);
      }, 100);
    }

    // Select element
    function selectElement(elementId) {
      deselectAll();
      const element = document.getElementById(elementId);
      if (element) {
        element.classList.add('selected');
        selectedElement = element;
      }
    }

    // Deselect all elements
    function deselectAll() {
      document.querySelectorAll('.content-element.selected').forEach(el => {
        el.classList.remove('selected');
      });
      selectedElement = null;
    }

    // Delete element
    function deleteElement(elementId) {
      const element = document.getElementById(elementId);
      if (element && confirm('Are you sure you want to delete this element?')) {
        element.remove();
        checkEmptyCanvas();
      }
    }

    // Check if canvas is empty
    function checkEmptyCanvas() {
      const canvas = document.getElementById('canvas');
      const elements = canvas.querySelectorAll('.content-element');
      const placeholder = canvas.querySelector('.canvas-placeholder');
      
      if (elements.length === 0) {
        if (placeholder) {
          placeholder.style.display = 'block';
        }
      }
    }

    // Handle image upload
    function handleImageUpload(event) {
      const files = event.target.files;
      for (let file of files) {
        if (file.type.startsWith('image/')) {
          const reader = new FileReader();
          reader.onload = function(e) {
            addImageElement(e.target.result, file.name);
          };
          reader.readAsDataURL(file);
        }
      }
      event.target.value = ''; // Reset input
    }

    // Add image element
    function addImageElement(imageSrc, fileName) {
      const canvas = document.getElementById('canvas');
      const placeholder = canvas.querySelector('.canvas-placeholder');
      
      if (placeholder) {
        placeholder.style.display = 'none';
      }

      const elementId = `element-${++elementCounter}`;
      const elementHTML = `
        <div class="content-element image-element fade-in" id="${elementId}">
          <div class="element-controls">
            <button class="control-btn" onclick="changeImage('${elementId}')" title="Change Image">🖼️</button>
            <button class="control-btn" onclick="deleteElement('${elementId}')" title="Delete">🗑️</button>
          </div>
          <img src="${imageSrc}" alt="${fileName}" style="max-width: 100%; height: auto;">
        </div>
      `;

      canvas.insertAdjacentHTML('beforeend', elementHTML);
      
      setTimeout(() => {
        selectElement(elementId);
      }, 100);
    }

    // Change image
    function changeImage(elementId) {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'image/*';
      input.onchange = function(e) {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function(e) {
            const element = document.getElementById(elementId);
            const placeholder = element.querySelector('.image-placeholder');
            const img = element.querySelector('img');
            
            if (placeholder) {
              placeholder.outerHTML = `<img src="${e.target.result}" alt="${file.name}" style="max-width: 100%; height: auto;">`;
            } else if (img) {
              img.src = e.target.result;
              img.alt = file.name;
            }
          };
          reader.readAsDataURL(file);
        }
      };
      input.click();
    }

    // Edit text
    function editText(elementId) {
      const element = document.getElementById(elementId);
      const editableElement = element.querySelector('.editable');
      
      if (editableElement) {
        document.getElementById('textContent').value = editableElement.textContent || editableElement.innerHTML;
        document.getElementById('textModal').style.display = 'block';
        selectedElement = element;
      }
    }

    // Update text content
    function updateTextContent() {
      if (selectedElement) {
        const editableElement = selectedElement.querySelector('.editable');
        const newContent = document.getElementById('textContent').value;
        
        if (editableElement) {
          if (editableElement.tagName === 'UL') {
            // Handle list specially
            editableElement.innerHTML = newContent;
          } else {
            editableElement.textContent = newContent;
          }
        }
      }
      closeModal();
    }

    // Close modal
    function closeModal() {
      document.getElementById('textModal').style.display = 'none';
    }

    // Drag and drop handlers
    function handleDragOver(event) {
      event.preventDefault();
      event.currentTarget.classList.add('drag-over');
    }

    function handleDrop(event) {
      event.preventDefault();
      event.currentTarget.classList.remove('drag-over');
      
      const files = event.dataTransfer.files;
      for (let file of files) {
        if (file.type.startsWith('image/')) {
          const reader = new FileReader();
          reader.onload = function(e) {
            addImageElement(e.target.result, file.name);
          };
          reader.readAsDataURL(file);
        }
      }
    }

    // Toolbar functions
    function saveContent() {
      const canvas = document.getElementById('canvas');
      const content = canvas.innerHTML;
      localStorage.setItem('aiChamberContent', content);
      alert('Content saved successfully! 💾');
    }

    function exportContent() {
      const canvas = document.getElementById('canvas');
      const content = canvas.innerHTML;
      
      const blob = new Blob([content], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'ai-workflow-content.html';
      a.click();
      URL.revokeObjectURL(url);
    }

    function previewMode() {
      const canvas = document.getElementById('canvas');
      const content = canvas.innerHTML;
      
      const previewWindow = window.open('', '_blank');
      previewWindow.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Preview - AI Chamber Content</title>
          <style>
            body { 
              font-family: 'Inter', sans-serif; 
              background: #0a0a0a; 
              color: #ffffff; 
              line-height: 1.6; 
              padding: 40px; 
              max-width: 1200px; 
              margin: 0 auto; 
            }
            ${document.querySelector('style').innerHTML}
          </style>
        </head>
        <body>
          <h1 style="text-align: center; margin-bottom: 40px;">📱 Preview Mode</h1>
          ${content}
        </body>
        </html>
      `);
      previewWindow.document.close();
    }

    function clearCanvas() {
      if (confirm('Are you sure you want to clear all content?')) {
        const canvas = document.getElementById('canvas');
        canvas.innerHTML = `
          <div class="canvas-placeholder">
            <h3>Start Building Your Content</h3>
            <p>Drag content blocks from the sidebar or click to add elements</p>
            <p>📱 Fully responsive • 🖼️ Flexible image placement • ⚡ Real-time preview</p>
          </div>
        `;
        elementCounter = 0;
      }
    }

    // Load sample content
    function loadSampleContent() {
      // Add some sample content if localStorage is empty
      const saved = localStorage.getItem('aiChamberContent');
      if (!saved) {
        setTimeout(() => {
          addElement('heading1');
          setTimeout(() => addElement('paragraph'), 300);
          setTimeout(() => addElement('image'), 600);
          setTimeout(() => addElement('list'), 900);
        }, 1000);
      }
    }

    // Auto-save functionality
    setInterval(() => {
      const canvas = document.getElementById('canvas');
      if (canvas.querySelectorAll('.content-element').length > 0) {
        localStorage.setItem('aiChamberContentAutoSave', canvas.innerHTML);
      }
    }, 30000); // Auto-save every 30 seconds
  </script>
</body>
</html>